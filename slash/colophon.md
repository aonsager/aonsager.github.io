---
layout: page
title: About this site
permalink: /colophon/
---

<div class="post-banner" style="background-image:linear-gradient(-45deg, #B85959, #B3CECB, #415974, #59586B, #B7C0C9)"></div>

# How the site is hosted

The site is hosted on a [Basic Digital Ocean droplet](https://www.digitalocean.com/products/droplets) with 2 vCPUs and 2GB of memory. So far this is enough to host all of my little web projects, including:

- A [Coolify](https://coolify.io) instance to manage deployments 
- [Pokemon Fusion](https://pokemon.alexonsager.net)
- [Commento](https://www.commento.io) to power comments on this blog
- [Umami](https://umami.is) for privacy-friendly analytics
- [GoToSocial](https://gotosocial.org) [instance](https://gts.invisibleparade.com/@alex) for participating in the Fediverse

## How the site is built

This site is generated by [Jekyll](https://jekyllrb.com) with some custom plugins. The source code can be seen [here](https://github.com/aonsager/aonsager.github.io). I initially chose Jekyll because it seened to be the most popular static site generator at the time, and Github Pages integration was nice. Build times are a little slow, and ruby/gem versions are a pain to manage, but for now it works well enough that I feel no need to change.

Initially, I set things up so that pushing a change to the repository would trigger a build on my server. However I ran into issues with gem versions not lining up, and it felt wasteful to be running through the entire process of downloading gems, installing packages, and building the site every time I want to deploy something. Especially since I have a perfectly good, pre-build copy sitting on my computer!
Now I have a separate repository for the compiled site, with a [rake task](#) that copies the compiled site to the repository and pushes it.

## Design decisions

I want the home page to show my most recent posts, and for it to show the full post content as much as possible. Sometimes I'll have a very long post with lots of example code showing, and for those I will have a "read more" link to see the full text.

### The post header

<div class="callout">
    {% include image.html image="colophon/post-header.png" -%}
</div>

I like structuring the blog as a [linklog](https://en.wikipedia.org/wiki/Linklog), and thought about how to present both a link to the original article and a permalink on my site. Currently, the post title links to the permalink, and I have a link to the original just below.

I also have a colorful gradient that subtly reflects the content of the post. I've written more about how this is done [here](/2019/03/20/adding-color-to-posts-automatically)

### Related posts

At the end of each post, there is a list of up to 5 related posts. These are determined by how many tags the posts have in common. I add tags to the each post but have decided not to display them anywhere. They are only used in the background the find related posts. I find that this adds a fun serendipity to the site, and sometimes I'm surprised to see what posts are brought up from the past.

The tags are generated automatically by a [rake task](#generate-tags-from-the-post-content) that runs whenever a draft is updated to "published" status.

### Social posts

Posts that I published to GoToSocial are reflected on this site as well. To visually deemphasize these compared to full-text posts, I indent the text slightly for social posts. This maybe too subtle of an effect, but adding more feels like it just draws more attention, so this is what I've landed on for now.
I post these directly to GoToSocial, and then use a [rake task](#) to compile them into the site upon build. This is backwards from a [POSSE](https://indieweb.org/POSSE) perspective, but it was the simplest implementation I could think of.

### Fonts

The font used in the logo is [Ostrich Sans Rounded](https://www.theleagueofmoveabletype.com/ostrich-sans?style=black), and the body is [Lato](https://fonts.google.com/specimen/Lato). 

## Customizations

I've accumulated a number of handy functions in my Rakefile that help me build the site more efficiently.

### <span id="colors_from_title">Generate colors from the post title</span>

This function performs a Google Image search for the test of the post title, and gets the first five results. It then extracts the most prominent color from each of the images, and uses these five colors to create a color gradient for the post's header. 
You can read more about this function [here](/2019/03/20/adding-color-to-posts-automatically).  
<a href="">See the source</a>

### <span id="tags_from_content">Generate tags from the post content</span>

This function uses ChatGPT's API to automatically generate tags based on the post's content. Since the tags are not displayed directly, I can afford to be laissez-faire about these results.
<a href="">See the source</a>

